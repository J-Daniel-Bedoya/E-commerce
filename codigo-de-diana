
function cartFunctionality() {
    let carts = document.querySelector("#cart-products");
    let cart = []
    let productsHTML = "";
    const btns = document.querySelectorAll( ".btn-add-cart" )
    btns.forEach( button => {
        button.addEventListener('click', e =>{
            const id = parseInt(e.target.parentElement.parentElement.id)
            const selectedProduct = productosStore.find( producto => producto.id === id)
            console.log(selectedProduct);
            
            if( cart.indexOf(selectedProduct)!== -1 ){
                if(selectedProduct.unidades>=1 && selectedProduct.unidades!==selectedProduct.stock){
                    selectedProduct.subtotal += selectedProduct.precio
                    selectedProduct.unidades++
                }else{
                    window.alert("No contamos con suficiente stock");
                }
            }else{
                cart.push( selectedProduct )
                selectedProduct.unidades = 1
                selectedProduct.subtotal = selectedProduct.precio
            }
            console.log(cart);

            cart.forEach(element =>{
                if (element.unidades === 1){
                    productsHTML +=` 
                    <div class="products--item" id="${element.id}">
                    <div class="item--container-img">
                    <img src=${element.img} class="item--img" alt="">
                    </div>
                    <div class="item--info">
                    <h4>${element.nombre}</h4>
                    <small>Stock: ${element.quantity}|</small>
                    <p>$${element.precio}</p>
                    <p id="subtotal${element.id}">Subtotal: $${element.subtotal}.00</p>
                    <div class="info--button">
                    <button id='button-less'>-</button>
                    <p id="units${element.id}">${element.unidades} units</p>
                    <button id='button-plus'>+</button>
                    </div>
                    </div>
                    <i class='bx bx-trash-alt'></i>          
                    </div> `
                    carts.innerHTML = productsHTML
                    }else{
                        document.getElementById(`subtotal${element.id}`).textContent=`Subtotal: $${element.subtotal}.00`
                        document.getElementById(`units${element.id}`).textContent=`${element.unidades} units`
                    }
                })
                    // element.stopPropagation()

        })
    })
}